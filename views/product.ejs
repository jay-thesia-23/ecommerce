<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/css/error.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <title>Products</title>
  </head>
  <body>
    <section class="vh-100" style="background-color: #9a616d">
      <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col col-xl-10">
            <div class="card align-items-center" style="border-radius: 1rem">
              <div class="col-md-6 col-lg-7 d-flex">
                <div class="card-body p-4 p-lg-5 text-black">
                  <form action="/category" method="post">
                    <div class="d-flex align-items-center mb-3 pb-1">
                      <i
                        class="fas fa-cubes fa-2x me-3"
                        style="color: #ff6219"
                      ></i>
                    </div>

                    <h5 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px">
                      Add Product
                    </h5>

                    <p id="errorCategory" class="error"></p>


                    <div class="form-outline mb-4">
                      <select
                      class="form-select"
                      aria-label="Default select example"
                      name="categoryId"
                      onchange="getSub(this)"
                    >
                      <option value="" selected>Select your category</option>

                      <%for(let i=0;i<cate.length;i++){%>

                        <option value="<%=cate[i].id%>" ><%=cate[i].categoryName%></option>

                      
                        <%}%>

                    
                    </select>
                    </div>

                    <div class="form-outline mb-4">
                      <select
                      class="form-select"
                      aria-label="Default select example"
                      name="subcategoryId"
                    >
                      <option value="" selected>Select your subcategory</option>
                    
                    </select>
                    </div>

                    <div class="form-outline mb-4"></div>

                    <div class="form-outline mb-4">
                      <input
                      type="text"
                      name="category"
                      id="category"
                      class="form-control form-control-lg"
                    />
                    <label class="form-label" for="form2Example17"
                      >Product Name</label>
                    </div>
                    <div class="form-outline mb-4">
                      <input
                      type="text"
                      name="category"
                      id="category"
                      class="form-control form-control-lg"
                    />
                    <label class="form-label" for="form2Example17"
                      >Product Price</label>
                    </div>


                    <div class="form-outline mb-4">
                      
                    
                      <input
                        type="text"
                        name="category"
                        id="category"
                        class="form-control form-control-lg"
                      />
                      <label class="form-label" for="form2Example17"
                        >Product Description</label
                      >
                    </div>


                    <div class="form-outline mb-4">
                      
                    
                      <input
                        type="text"
                        name="category"
                        id="category"
                        class="form-control form-control-lg"
                      />
                      <label class="form-label" for="form2Example17"
                        >Product Quantity</label
                      >
                    </div>


                    <div class="form-outline mb-4">
                      
                    
                      <input
                        type="file"
                        name="category"
                        id="category"
                        class="form-control form-control-lg"
                      />
                      <label class="form-label" for="form2Example17"
                        >Product Image</label
                      >
                    </div>

                    <div class="pt-1 mb-4">
                      <input
                        type="submit"
                        value="Add Category"
                        class="btn btn-dark btn-lg btn-block"
                        onclick="return validation()"
                      />
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
      function validation() {
        let cate = document.getElementById('category').value;
        let error = document.getElementById('errorCategory');

        if (cate == undefined || cate == '') {
          error.innerText = '*Please enter the category first';
          return false;
        }

        return true;
      }

      async function getSub(product){

        console.log(product.value,"prpoduct fetch");
       const response= await fetch(`/products/subcategory?id=${product.value}`)
       const ans=await response.json()

       console.log(ans,"answer");
       console.log("clicked");


      }
    </script>
  </body>
</html>
